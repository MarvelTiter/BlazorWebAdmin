{"version":3,"sources":["../../../utilsAggregation.ts","../../../Shared/Project.Web.Shared/JsCore/componentStore.ts","../../../Shared/Project.Web.Shared/JsCore/baseComponent.ts","../../../Shared/Project.Web.Shared/JsCore/handlerBase.ts","../../../Shared/Project.Web.Shared/JsCore/customEventHandler.ts","../../../Shared/Project.Web.Shared/JsCore/resizeHandler.ts","../../../Shared/Project.Web.Shared/JsCore/eventHandlerSet.ts","../../../Shared/Project.Web.Shared/JsCore/eventHandler.ts","../../../Shared/Project.Web.Shared/Components/ActionWatcher/ActionWatcher.razor.ts","../../../Shared/Project.Web.Shared/JsCore/utils.ts","../../../Shared/Project.Web.Shared/JsCore/dragHelper.ts","../../../Shared/Project.Web.Shared/Components/Camera/Camera.razor.ts","../../../Shared/Project.Web.Shared/Components/EdgeWidget/EdgeWidget.razor.ts","../../../Shared/Project.Web.Shared/Components/Fetch/Fetch.razor.ts","../../../Shared/Project.Web.Shared/Components/FullScreen/FullScreen.razor.ts","../../../Shared/Project.Web.Shared/Components/JsTimer/JsTimer.razor.ts","../../../Shared/Project.Web.Shared/Components/ScrollBar/Bar.ts","../../../Shared/Project.Web.Shared/Components/ScrollBar/Thumb.ts","../../../Shared/Project.Web.Shared/Components/ScrollBar/ScrollBar.razor.ts","../../../Shared/Project.Web.Shared/Components/ScrollBar/HorizontalScroll.razor.ts","../../../Shared/Project.Web.Shared/Components/SplitView/SplitView.razor.ts","../../../Shared/Project.Web.Shared/Components/WaterMark/WaterMark.razor.ts","../../../Shared/Project.Web.Shared/Layouts/LayoutComponents/NavTabs.razor.ts","../../../Shared/Project.Web.Shared/Components/Downloader/Downloader.razor.ts","../../../Shared/Project.Web.Shared/Components/SvgIcon/SvgIcon.razor.ts","../../../Shared/Project.Web.Shared/Components/ClientHub/ClientHub.ts","../../../main.ts"],"sourcesContent":["\r\nfunction closeWin() {\r\n    window.close()\r\n}\r\n\r\nfunction openWindow(url: string, width: number, height: number, target?: string) {\r\n    const cW = window.outerWidth\r\n    const cH = window.outerHeight\r\n    let w = cW, h = cH\r\n    if (width <= 1) {\r\n        w = cW * width\r\n    }\r\n    if (height <= 1) {\r\n        h = cH * height\r\n    }\r\n    const top = (cH - h) / 2 + window.screenTop\r\n    const left = (cW - w) / 2 + window.screenLeft\r\n    const features = `popup=yes, left=${left}, top=${top}, width=${w}, height=${h}`\r\n    console.log(features)\r\n    window.open(url, target, features)\r\n}\r\n\r\nasync function getClient() {\r\n    if (window.opener !== null) {\r\n        return [null, null]\r\n    }\r\n    const response = await fetch('/ip.client')\r\n    const ip = await response.text()\r\n    return [ip, navigator.userAgent]\r\n}\r\n\r\nexport default {\r\n    closeWin,\r\n    openWindow,\r\n    getClient\r\n}","﻿const allComponentMap = new Map<string, any>()\r\ndeclare global {\r\n    interface Window {\r\n        allComponentMap: Map<string, any>\r\n    }\r\n}\r\nwindow.allComponentMap = allComponentMap\r\n\r\nexport function getComponentById(id: string, init?: Function | Object) {\r\n    if (!allComponentMap.has(id) && init !== undefined) {\r\n        if (init instanceof Function) {\r\n            allComponentMap.set(id, init())\r\n        } else if (init) {\r\n            allComponentMap.set(id, init)\r\n        } else {\r\n            console.error('初始化异常', init)\r\n            throw new Error('初始化异常')\r\n        }\r\n    }\r\n    if (allComponentMap.has(id))\r\n        return allComponentMap.get(id)\r\n    else\r\n        return undefined\r\n}\r\n\r\nexport function removeComponent(id: string): void {\r\n    allComponentMap.delete(id)\r\n}\r\n","﻿import { getComponentById, removeComponent } from './componentStore'\r\n\r\nexport class BaseComponent {\r\n    dispose(): void {\r\n\r\n    }\r\n\r\n    static dispose(id: string): void {\r\n        const com = getComponentById(id)\r\n        if (com) {\r\n            console.debug('dispose: ', id, com)\r\n            com.dispose()\r\n            removeComponent(id)\r\n        }\r\n    }\r\n}","﻿declare global {\r\n    interface EventTarget {\r\n        eventUid: any\r\n    }\r\n}\r\nlet eventUid = 1\r\n\r\nexport function makeUid(el: EventTarget, uid: any = undefined): any {\r\n    return ((uid && `${uid}::${eventUid++}`) || el.eventUid || eventUid++);\r\n}\r\n\r\n\r\nexport class HandlerBase {\r\n    element: EventTarget | Element\r\n    id: string\r\n    delegate: Function\r\n    type: string\r\n    once: boolean\r\n    drop: Function | undefined\r\n\r\n    constructor(el: EventTarget | Element\r\n        , eventType: string\r\n        , fn: Function\r\n        , id: string\r\n        , once: boolean\r\n        , drop: Function | undefined = undefined) {\r\n        this.element = el\r\n        this.id = id\r\n        this.delegate = fn\r\n        this.type = eventType\r\n        this.once = once\r\n        this.drop = drop\r\n    }\r\n\r\n    action(event: any): void {\r\n        if (this.once) {\r\n            this.off()\r\n            if (this.drop) this.drop()\r\n        }\r\n        this.delegate.apply(this.element, [event]);\r\n    }\r\n\r\n    bind(): void {\r\n    }\r\n\r\n    off(): void {\r\n    }\r\n\r\n}\r\n","﻿import {HandlerBase} from './handlerBase'\r\n\r\nexport class CustomEventHandler extends HandlerBase {\r\n    constructor(el: EventTarget\r\n        , eventType: string\r\n        , fn: Function\r\n        , id: string\r\n        , once: boolean\r\n        , drop: Function | undefined = undefined) {\r\n        super(el, eventType, fn, id, once, drop);\r\n    }\r\n\r\n    on(): void {\r\n        this.element.addEventListener(this.type, this.action);\r\n    }\r\n\r\n    off(): void {\r\n        this.element.removeEventListener(this.type, this.action);\r\n    }\r\n}\r\n","﻿import {HandlerBase} from './handlerBase'\r\n\r\nexport class ResizeHandler extends HandlerBase {\r\n    resizeObserver: ResizeObserver\r\n\r\n    constructor(el: Element | EventTarget\r\n        , fn: Function\r\n        , id: string\r\n        , once: boolean\r\n        , drop: Function | undefined = undefined) {\r\n        super(el, 'resize', fn, id, once, drop);\r\n        this.resizeObserver = new ResizeObserver(entries => {\r\n            this.action(entries);\r\n        });\r\n    }\r\n\r\n    on(): void {\r\n        if (this.element instanceof Element)\r\n            this.resizeObserver.observe(this.element);\r\n    }\r\n\r\n    off(): void {\r\n        this.resizeObserver.disconnect();\r\n    }\r\n}\r\n","﻿import {HandlerBase, makeUid} from './handlerBase'\r\nimport {CustomEventHandler} from './customEventHandler'\r\nimport {ResizeHandler} from './resizeHandler'\r\n\r\ndeclare global {\r\n    interface Window {\r\n        allEventsMap: Map<string, ElementHandlerSet>\r\n    }\r\n}\r\nconst registry = new Map<string, ElementHandlerSet>()\r\nconst RESIZE_EVENT = 'resize'\r\nwindow.allEventsMap = registry\r\n\r\nexport function getElementEvents(el: EventTarget): ElementHandlerSet {\r\n    const uid = makeUid(el)\r\n    el.eventUid = uid\r\n    registry[uid] = registry[uid] || new ElementHandlerSet(el)\r\n    return registry[uid]\r\n}\r\n\r\nexport function removeRegistry(el: EventTarget): void {\r\n    const uid = makeUid(el)\r\n    delete registry[uid]\r\n}\r\n\r\nexport function addListener(el: EventTarget, eventType: string, action: Function, once: boolean) {\r\n    const ets = getElementEvents(el)\r\n\r\n    if (eventType == RESIZE_EVENT) {\r\n        ets.addResizeHandler(action, once)\r\n    } else {\r\n        ets.addHandler(action, eventType, once)\r\n    }\r\n}\r\n\r\nexport class ElementHandlerSet {\r\n    element: EventTarget\r\n    events: Map<string, Map<string, HandlerBase>>\r\n\r\n    constructor(el: EventTarget) {\r\n        this.element = el\r\n        this.events = new Map<string, Map<string, HandlerBase>>()\r\n    }\r\n\r\n    addHandler(fn: Function, eventType: string, once: boolean): void {\r\n        const uid = makeUid(this.element, eventType)\r\n        let dropHandler: Function | undefined = undefined\r\n        if (once) {\r\n            dropHandler = () => this.removeHandler(eventType, fn)\r\n        }\r\n        var handler = new CustomEventHandler(this.element, eventType, fn, uid, once, dropHandler)\r\n        const handlers: Map<string, HandlerBase> = this.events.get(eventType) || new Map<string, HandlerBase>()\r\n        // handlers[uid] = handler\r\n        handlers.set(uid, handler)\r\n        this.events.set(eventType, handlers)\r\n        handler.action = handler.action.bind(handler)\r\n        //this.element.addEventListener(eventType, handler.action)\r\n        handler.on()\r\n    }\r\n\r\n    addResizeHandler(fn: Function, once: boolean) {\r\n        const uid = makeUid(this.element, RESIZE_EVENT)\r\n        let dropHandler: Function | undefined = undefined\r\n        if (once) {\r\n            dropHandler = () => this.removeHandler(RESIZE_EVENT, fn)\r\n        }\r\n        var handler = new ResizeHandler(this.element, fn, uid, once, dropHandler)\r\n        const handlers: Map<string, HandlerBase> = this.events.get(RESIZE_EVENT) || new Map<string, HandlerBase>()\r\n        handlers.set(uid, handler)\r\n        this.events.set(RESIZE_EVENT, handlers)\r\n        handler.on()\r\n    }\r\n\r\n    removeHandler(eventType: string, action?: Function) {\r\n        const handlers = this.events.get(eventType)\r\n        if (handlers == undefined) {\r\n            return\r\n        }\r\n        if (action) {\r\n            const enumerator = handlers.values()\r\n            let r: IteratorResult<HandlerBase>\r\n            while (r = enumerator.next(), !r.done) {\r\n                const handler = r.value\r\n                if (handler.delegate == action) {\r\n                    handler.off()\r\n                    handlers.delete(handler.id)\r\n                    break\r\n                }\r\n            }\r\n            // for (const handler of handlers.values()) {\r\n            //     if (handler.delegate == action) {\r\n            //         handler.off()\r\n            //         handlers.delete(handler.id)\r\n            //         break\r\n            //     }\r\n            // }\r\n        } else {\r\n            // 移除所有 eventType 的处理\r\n            for (var h in handlers) {\r\n                handlers.get(h)?.off()\r\n                handlers.delete(h)\r\n            }\r\n        }\r\n        // 事件类型为空，移除事件类型\r\n        if (handlers.size == 0) {\r\n            this.events.delete(eventType)\r\n        }\r\n        // 事件为空，移除对象\r\n        if (this.events.size == 0) {\r\n            removeRegistry(this.element)\r\n        }\r\n    }\r\n}\r\n","﻿import {addListener, getElementEvents} from './eventHandlerSet'\r\n\r\nexport const EventHandler = {\r\n    listen: function (el: EventTarget, eventType: string, action: Function) {\r\n        if (!el) return\r\n        addListener(el, eventType, action, false)\r\n    },\r\n    once: function (el: EventTarget, eventType: string, action: Function) {\r\n        if (!el) return\r\n        addListener(el, eventType, action, true)\r\n    },\r\n    remove: function (el: EventTarget, eventType: string, action?: Function) {\r\n        if (!el) return\r\n        const ets = getElementEvents(el);\r\n        ets.removeHandler(eventType, action);\r\n    }\r\n}\r\n","﻿import { BaseComponent } from '../../JsCore/baseComponent'\r\nimport { EventHandler } from '../../JsCore/eventHandler'\r\nimport { getComponentById } from '../../JsCore/componentStore'\r\nexport class ActionWatcher extends BaseComponent {\r\n    instance: any\r\n    type: number\r\n    timeout: number\r\n    target: HTMLElement\r\n    timer?: number\r\n    constructor(options:any) {\r\n        super()\r\n        this.instance = options.instance\r\n        this.type = options.type\r\n        this.timeout = options.timeout\r\n        this.target = options.target || window.document.documentElement\r\n    }\r\n\r\n    start(): void {\r\n        if (this.type == 1) {\r\n            EventHandler.listen(this.target, \"mousemove\", this.debounce.bind(this))\r\n            EventHandler.listen(this.target, \"keydown\", this.debounce.bind(this))\r\n        } else if (this.type == 2) {\r\n            EventHandler.listen(this.target, \"mousemove\", this.throttle.bind(this))\r\n            EventHandler.listen(this.target, \"keydown\", this.throttle.bind(this))\r\n        }\r\n    }\r\n\r\n    debounce() {\r\n        clearTimeout(this.timer)\r\n        this.timer = window.setTimeout(() => {\r\n            this.invoke()\r\n        }, this.timeout)\r\n    }\r\n\r\n    throttle() {\r\n        if (!this.timer) {\r\n            this.invoke()\r\n            this.timer = window.setTimeout(() => {\r\n                this.timer = undefined\r\n            }, this.timeout)\r\n        }\r\n    }\r\n    invoke() {\r\n        this.instance.invokeMethodAsync('Call')\r\n    }\r\n\r\n    dispose() {\r\n        EventHandler.remove(this.target, \"mousemove\")\r\n        EventHandler.remove(this.target, \"keydown\")\r\n        window.clearTimeout(this.timer)\r\n        this.timer = undefined\r\n    }\r\n\r\n    static init(id: string, options:any) {\r\n        if (!id){\r\n            console.log('id is not defined')\r\n            return\r\n        }\r\n        var watcher = getComponentById(id, () => {\r\n            return new ActionWatcher(options);\r\n        });\r\n        watcher.start();\r\n    }\r\n}\r\n","﻿export interface IJsActionResult {\r\n    success: boolean,\r\n    message: string | undefined,\r\n    payload: any\r\n}\r\nexport function success(msg: string | undefined, payload?: any): IJsActionResult {\r\n    return {\r\n        success: true,\r\n        message: msg,\r\n        payload: payload\r\n    }\r\n}\r\n\r\nexport function failed(msg: string | undefined): IJsActionResult {\r\n    return {\r\n        success: false,\r\n        message: msg,\r\n        payload: null\r\n    }\r\n}\r\n\r\nexport const GAP = 4;\r\n","﻿import { EventHandler } from './eventHandler'\r\nconst storeValue = {};\r\nfunction storeOnSelectstart() {\r\n    storeValue['onselectstart'] = document.onselectstart;\r\n    document.onselectstart = () => false\r\n}\r\n\r\nfunction restoreOnSelectstart() {\r\n    if (document.onselectstart !== storeValue['onselectstart'])\r\n        document.onselectstart = storeValue['onselectstart']\r\n}\r\nexport function startDrag(e: Event, moveHandler: Function, upHandler?: Function) {\r\n    e.stopImmediatePropagation()\r\n    EventHandler.listen(document.documentElement, 'mousemove', moveHandler)\r\n    EventHandler.once(document.documentElement, 'mouseup', e => {\r\n        if (upHandler){\r\n            upHandler()\r\n        }\r\n        EventHandler.remove(document.documentElement, 'mousemove', moveHandler)\r\n        restoreOnSelectstart()\r\n    })\r\n    storeOnSelectstart()\r\n}\r\n","import { IJsActionResult, failed, success } from '../../JsCore/utils'\r\nimport { BaseComponent } from '../../JsCore/baseComponent'\r\nimport { startDrag } from '../../JsCore/dragHelper'\r\nimport { EventHandler } from '../../JsCore/eventHandler'\r\nimport { getComponentById } from '../../JsCore/componentStore'\r\n\r\nexport class Camera extends BaseComponent {\r\n    deviceId: string\r\n    width: number\r\n    height: number\r\n    video: HTMLVideoElement\r\n    tracks: MediaStreamTrack[]\r\n    clipBox?: ClipBox\r\n    quality: number\r\n    format: string\r\n    constructor(options: any) {\r\n        super()\r\n        this.deviceId = ''\r\n        this.width = 0\r\n        this.height = 0\r\n        this.video = options.video\r\n        this.tracks = []\r\n        this.quality = options.quality\r\n        this.format = options.format\r\n        if (options.clip) {\r\n            this.clipBox = new ClipBox(options)\r\n            this.clipBox.initEvents()\r\n        }\r\n    }\r\n\r\n    open(deviceId: string, width: number, height: number): Promise<IJsActionResult> {\r\n        return new Promise(resolve => {\r\n            if (navigator && navigator.mediaDevices) {\r\n                navigator.mediaDevices.getUserMedia({\r\n                    video: {\r\n                        deviceId: { exact: deviceId },\r\n                        width: { ideal: width },\r\n                        height: { ideal: height },\r\n                    },\r\n                })\r\n                    .then((stream) => {\r\n                        /* 使用这个 stream stream */\r\n                        this.width = width;\r\n                        this.height = height;\r\n                        this.deviceId = deviceId;\r\n                        try {\r\n                            this.video.srcObject = stream;\r\n                            this.tracks = stream.getTracks();\r\n                            this.video.onloadedmetadata = (e) => {\r\n                                this.video.play();\r\n                                if (this.clipBox)\r\n                                    this.clipBox.setVisible(true);\r\n                                resolve(success('开始播放'));\r\n                            };\r\n                        } catch (e: any) {\r\n                            resolve(failed(e.message));\r\n                        }\r\n                    })\r\n                    .catch(function (err) {\r\n                        /* 处理 error */\r\n                        resolve(failed(err.message));\r\n                    });\r\n            } else {\r\n                resolve(failed('浏览器不支持'))\r\n            }\r\n        })\r\n    }\r\n\r\n    capture(rotate: number) {\r\n        try {\r\n            if (this.video && this.video.readyState > 2) {\r\n                var data = ''\r\n                var canvas = document.createElement('canvas');\r\n                var ctx = canvas.getContext('2d');\r\n                if (ctx == null) {\r\n                    return failed('获取Canvas Context失败')\r\n                }\r\n                var x = 0, y = 0, w = this.video.videoWidth, h = this.video.videoHeight\r\n                if (this.clipBox) {\r\n                    this.clipBox.applyRect()\r\n                    var scaleX = this.video.videoWidth / this.clipBox.videoWindowWidth\r\n                    var scaleY = this.video.videoHeight / this.clipBox.videoWindowHeight\r\n                    x = this.clipBox.x * scaleX\r\n                    y = this.clipBox.y * scaleY\r\n                    w = this.clipBox.w * scaleX\r\n                    h = this.clipBox.h * scaleY\r\n                }\r\n                rotate = rotate % 4\r\n                let tx = 0, ty = 0\r\n                if (rotate == 0 || rotate == 2) {\r\n                    canvas.width = w\r\n                    canvas.height = h\r\n                    if (rotate == 2) {\r\n                        tx = w\r\n                        ty = h\r\n                    }\r\n                } else {\r\n                    // 竖屏\r\n                    canvas.width = h\r\n                    canvas.height = w\r\n                    if (rotate == 1) {\r\n                        tx = h\r\n                    } else {\r\n                        ty = w\r\n                    }\r\n                }\r\n                let angle = rotate * 90 * Math.PI / 180\r\n                ctx.translate(tx, ty)\r\n                ctx.rotate(angle)\r\n                ctx.drawImage(this.video, x, y, w, h, 0, 0, w, h)\r\n                ctx.rotate(-angle)\r\n                ctx.translate(-tx, -ty)\r\n\r\n                var dataURL = canvas.toDataURL(this.format, this.quality);\r\n                //window.document.getElementById('test').src = dataURL\r\n                if (dataURL.split(',').length > 1)\r\n                    data = dataURL.split(',')[1]\r\n                return success('', data)\r\n            }\r\n            return failed('视频状态异常')\r\n        } catch (e: any) {\r\n            return failed(e.message)\r\n        }\r\n    }\r\n\r\n    close() {\r\n        this.tracks.forEach(tra => tra.stop())\r\n        this.tracks = []\r\n        if (this.video)\r\n            this.video.srcObject = null;\r\n        if (this.clipBox)\r\n            this.clipBox.setVisible(false)\r\n    }\r\n    dispose() {\r\n        if (this.clipBox) {\r\n            this.clipBox.dispose()\r\n            this.clipBox = undefined\r\n        }\r\n        this.close()\r\n    }\r\n\r\n    // video, quality, clip, width, height\r\n    static init(id: string, options: any) {\r\n        getComponentById(id, () => {\r\n            return new Camera(options)\r\n        })\r\n    }\r\n    static useClipBox(id: string, options: any) {\r\n        var c: Camera = getComponentById(id)\r\n        if (c && c.clipBox == undefined) {\r\n            c.clipBox = new ClipBox(options)\r\n            c.clipBox.initEvents()\r\n        }\r\n        c.clipBox?.setVisible(true)\r\n    }\r\n\r\n    static disableClipBox(id: string) {\r\n        var c: Camera = getComponentById(id)\r\n        if (c && c.clipBox) {\r\n            c.clipBox.setVisible(false)\r\n            c.clipBox.dispose()\r\n            c.clipBox = undefined\r\n        }\r\n    }\r\n    static async enumerateDevices() {\r\n        if (navigator && navigator.mediaDevices) {\r\n            var devices = await navigator.mediaDevices.enumerateDevices()\r\n            return success('', devices)\r\n        }\r\n        return failed('获取设备失败！请检查设备连接或者浏览器配置！')\r\n    }\r\n\r\n    static async loadUserMedia(id: string, deviceId: string, width: number, height: number) {\r\n        try {\r\n            const camera: Camera = getComponentById(id)\r\n            return await camera.open(deviceId, width, height)\r\n        } catch (e: any) {\r\n            return failed(e.message)\r\n        }\r\n    }\r\n    static closeUserMedia(id: string) {\r\n        try {\r\n            const camera = getComponentById(id)\r\n            if (camera)\r\n                camera.close()\r\n            return success('')\r\n        } catch (e: any) {\r\n            return failed(e.message)\r\n        }\r\n    }\r\n    static capture(id: string, rotate: number) {\r\n        const camera: Camera = getComponentById(id)\r\n        return camera.capture(rotate)\r\n    }\r\n}\r\nclass ClipBox extends BaseComponent {\r\n    el: HTMLElement\r\n    w: number\r\n    h: number\r\n    x: number\r\n    y: number\r\n    videoWindowWidth: number\r\n    videoWindowHeight: number\r\n    scaleWidth: number\r\n    constructor(options: any) {\r\n        super()\r\n        this.el = options.clip\r\n        this.w = options.width * 0.8\r\n        this.h = options.height * 0.8\r\n        this.x = options.width * 0.1\r\n        this.y = options.height * 0.1\r\n        this.videoWindowWidth = options.width\r\n        this.videoWindowHeight = options.height\r\n        this.el.style.width = this.w + 'px'\r\n        this.el.style.height = this.h + 'px'\r\n        this.scaleWidth = 10\r\n        this.applyRect()\r\n    }\r\n\r\n    applyRect() {\r\n        if (this.x < 0)\r\n            this.x = 0\r\n        if (this.y < 0)\r\n            this.y = 0\r\n        if (this.x > this.videoWindowWidth - this.w)\r\n            this.x = this.videoWindowWidth - this.w\r\n        if (this.y > this.videoWindowHeight - this.h)\r\n            this.y = this.videoWindowHeight - this.h\r\n        //if (this.el.)\r\n        if (this.el.offsetWidth > 0)\r\n            this.w = this.el.offsetWidth\r\n        if (this.el.offsetHeight > 0)\r\n            this.h = this.el.offsetHeight\r\n        this.el.style.top = this.y + 'px'\r\n        this.el.style.left = this.x + 'px'\r\n        // 用于缩放的最大限制\r\n        this.el.style[\"max-width\"] = (this.videoWindowWidth - this.x) + 'px'\r\n        this.el.style[\"max-height\"] = (this.videoWindowHeight - this.y) + 'px'\r\n    }\r\n\r\n    canMove(x: number, y: number) {\r\n        this.w = this.el.offsetWidth\r\n        this.h = this.el.offsetHeight\r\n        return x > this.scaleWidth && x < this.w - this.scaleWidth && y > this.scaleWidth && y < this.h - this.scaleWidth\r\n    }\r\n\r\n    setVisible(visible) {\r\n        if (this.el) {\r\n            this.el.style.display = visible ? 'block' : 'none'\r\n        }\r\n    }\r\n\r\n    handleMouseDown(e) {\r\n        e.stopPropagation()\r\n        if (e.ctrlKey || [1, 2].indexOf(e.button) > -1) return\r\n        if (window && window.getSelection()) {\r\n            window.getSelection()?.removeAllRanges()\r\n        }\r\n        var x = e.offsetX\r\n        var y = e.offsetY\r\n        if (this.canMove(x, y)) {\r\n            startDrag(e, event => {\r\n                this.x = event.offsetX - x + this.x\r\n                this.y = event.offsetY - y + this.y\r\n                this.applyRect()\r\n            })\r\n        }\r\n    }\r\n\r\n    initEvents() {\r\n        EventHandler.listen(this.el, 'mousedown', this.handleMouseDown.bind(this))\r\n    }\r\n\r\n    dispose() {\r\n        EventHandler.remove(this.el, 'mousedown')\r\n    }\r\n}\r\n","import { BaseComponent } from \"../../JsCore/baseComponent\";\r\nimport { getComponentById } from \"../../JsCore/componentStore\";\r\nimport { EventHandler } from \"../../JsCore/eventHandler\";\r\n\r\nexport class EdgeWidget extends BaseComponent {\r\n    mask: HTMLElement\r\n    childContentContainer: HTMLElement\r\n    trigger: HTMLElement\r\n    contentWidth: number\r\n    //show: boolean\r\n    constructor(options: any) {\r\n        super()\r\n        this.mask = options.mask\r\n        this.childContentContainer = options.container\r\n        this.trigger = options.trigger\r\n        var containerRect = this.childContentContainer.getBoundingClientRect()\r\n        this.contentWidth = containerRect.width\r\n        //this.show = false\r\n        this.childContentContainer.style.left = -this.getWidth() + 'px'\r\n        this.bindEvents()\r\n    }\r\n    getWidth(): number {\r\n        return this.contentWidth\r\n    }\r\n    bindEvents() {\r\n        EventHandler.listen(this.trigger, 'click', this.toggle.bind(this))\r\n        EventHandler.listen(this.mask, 'click', this.toggle.bind(this))\r\n    }\r\n    toggle(e: Event) {\r\n        e.stopPropagation()\r\n        this.mask.classList.toggle('show');\r\n        this.childContentContainer.classList.toggle('show');\r\n    }\r\n    dispose(): void {\r\n        EventHandler.remove(this.trigger, 'click')\r\n        EventHandler.remove(this.mask, 'click')\r\n    }\r\n    static init(id: string, options: any) {\r\n        getComponentById(id, () => {\r\n            return new EdgeWidget(options);\r\n        });\r\n    }\r\n}\r\n","import { BaseComponent } from \"../../JsCore/baseComponent\";\r\nimport { getComponentById } from \"../../JsCore/componentStore\";\r\nimport { failed, success } from \"../../JsCore/utils\";\r\n\r\nexport class Fetch extends BaseComponent {\r\n    constructor() {\r\n        super()\r\n    }\r\n    async request(option: any) {\r\n        var req: RequestInit = {\r\n            method: option.method, // *GET, POST, PUT, DELETE, etc.\r\n            mode: \"cors\", // no-cors, *cors, same-origin\r\n            cache: \"no-cache\", // *default, no-cache, reload, force-cache, only-if-cached\r\n            credentials: \"same-origin\", // include, *same-origin, omit\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                // 'Content-Type': 'application/x-www-form-urlencoded',\r\n            },\r\n            redirect: \"follow\", // manual, *follow, error\r\n            referrerPolicy: \"no-referrer\", // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url\r\n        }\r\n        ''.toLowerCase\r\n        if (option.method.toLowerCase() != 'get' && option.method.toLowerCase() != 'head') {\r\n            //body: , // body data type must match \"Content-Type\" header\r\n            req.body = JSON.stringify(option.body)\r\n        }\r\n        const response = await fetch(option.url, req)\r\n        return response\r\n    }\r\n\r\n    static init(id: string) {\r\n        var com = getComponentById(id, () => {\r\n            return new Fetch()\r\n        })\r\n    }\r\n\r\n    static async request(id: string, option: any) {\r\n        var com = getComponentById(id)\r\n        try {\r\n            var response = await com.request(option)\r\n            /** [MDN Reference](https://developer.mozilla.org/docs/Web/API/Response/ok) */\r\n            if (response.ok) {\r\n                /** [MDN Reference](https://developer.mozilla.org/docs/Web/API/Request/json) */\r\n                return success(\"\", response.json())\r\n            } else {\r\n                /** [MDN Reference](https://developer.mozilla.org/docs/Web/API/Request/text) */\r\n                return failed(response.text())\r\n            }\r\n        } catch (e: any) {\r\n            return failed(`${e.name}:${e.message}`)\r\n        }\r\n\r\n    }\r\n}\r\n","import { BaseComponent } from \"../../JsCore/baseComponent\";\r\nimport { getComponentById } from \"../../JsCore/componentStore\";\r\n\r\nexport class FullScreen extends BaseComponent {\r\n    element: any\r\n    document: any\r\n    constructor() {\r\n        super()\r\n        this.element = document.documentElement\r\n        this.document = document\r\n    }\r\n\r\n    toggle() {\r\n        if (this.isFullscreen()) {\r\n            this.exit()\r\n        } else {\r\n            this.enter()\r\n        }\r\n    }\r\n\r\n    enter() {\r\n        this.element.requestFullscreen() ||\r\n            this.element.webkitRequestFullscreen ||\r\n            this.element.mozRequestFullScreen ||\r\n            this.element.msRequestFullscreen;\r\n    }\r\n\r\n    exit() {\r\n        if (this.document.exitFullscreen) {\r\n            this.document.exitFullscreen();\r\n        }\r\n        else if (this.document.mozCancelFullScreen) {\r\n            this.document.mozCancelFullScreen();\r\n        }\r\n        else if (this.document.webkitExitFullscreen) {\r\n            this.document.webkitExitFullscreen();\r\n        }\r\n        else if (this.document.msExitFullscreen) {\r\n            this.document.msExitFullscreen();\r\n        }\r\n    }\r\n\r\n    isFullscreen() {\r\n        return this.document.fullscreen ||\r\n            this.document.webkitIsFullScreen ||\r\n            this.document.webkitFullScreen ||\r\n            this.document.mozFullScreen ||\r\n            this.document.msFullScreent\r\n    }\r\n\r\n    static init(id) {\r\n        getComponentById(id, () => {\r\n            return new FullScreen()\r\n        })\r\n    }\r\n\r\n    static toggle(id) {\r\n        const fullscreen = getComponentById(id)\r\n        fullscreen.toggle()\r\n    }\r\n}\r\n","import { BaseComponent } from \"../../JsCore/baseComponent\"\r\nimport { getComponentById } from \"../../JsCore/componentStore\"\r\n\r\nexport class JsTimer extends BaseComponent {\r\n    instance: any\r\n    interval: number\r\n    timer?: number\r\n    constructor(options: any) {\r\n        super()\r\n        this.instance = options.dotNetRef\r\n        this.interval = options.interval\r\n    }\r\n    start() {\r\n        this.timer = window.setInterval(() => {\r\n            this.instance.invokeMethodAsync(\"Call\")\r\n        }, this.interval)\r\n    }\r\n\r\n    dispose() {\r\n        if (this.timer) {\r\n            window.clearInterval(this.timer)\r\n            this.timer = undefined\r\n        }\r\n    }\r\n\r\n    static init(id: string, options: any) {\r\n        const timter: JsTimer = getComponentById(id, () => {\r\n            return new JsTimer(options)\r\n        })\r\n        timter.start()\r\n    }\r\n}\r\n","import { BaseComponent } from \"../../JsCore/baseComponent\"\r\nimport { GAP } from \"../../JsCore/utils.ts\"\r\nimport { ScrollBar } from \"./ScrollBar.razor.ts\"\r\nimport { Thumb } from \"./Thumb\"\r\n\r\nexport class Bar extends BaseComponent {\r\n    always: boolean = false\r\n    vertical?: Thumb\r\n    horizontal?: Thumb\r\n    parent: ScrollBar\r\n    constructor(scrollbar: ScrollBar) {\r\n        super()\r\n        this.parent = scrollbar\r\n    }\r\n    update() {\r\n        if (this.vertical && this.vertical.thumb) {\r\n            this.vertical.thumb.style['height'] = this.parent.sizeHeight\r\n        }\r\n        if (this.horizontal && this.horizontal.thumb) {\r\n            this.horizontal.thumb.style['width'] = this.parent.sizeWidth\r\n        }\r\n    }\r\n\r\n    handleScroll(e) {\r\n        if (this.parent.wrap) {\r\n            const offsetHeight = this.parent.wrap.offsetHeight - GAP\r\n            const offsetWidth = this.parent.wrap.offsetWidth - GAP\r\n            if (this.vertical)\r\n                this.vertical.setMove(((this.parent.wrap.scrollTop * 100) / offsetHeight) * this.parent.ratioY)\r\n            if (this.horizontal)\r\n                this.horizontal.setMove(((this.parent.wrap.scrollLeft * 100) / offsetWidth) * this.parent.ratioX)\r\n        }\r\n    }\r\n\r\n    setVisible(visible) {\r\n        if (this.always) return\r\n        if (this.vertical) this.vertical.setVisible(visible)\r\n        if (this.horizontal) this.horizontal.setVisible(visible)\r\n    }\r\n\r\n    dispose() {\r\n        if (this.vertical) this.vertical.dispose()\r\n        if (this.horizontal) this.horizontal.dispose()\r\n    }\r\n}\r\n","import { BaseComponent } from \"../../JsCore/baseComponent\"\r\nimport { startDrag } from \"../../JsCore/dragHelper.ts\"\r\nimport { EventHandler } from \"../../JsCore/eventHandler.ts\"\r\nimport { GAP } from \"../../JsCore/utils.ts\"\r\nimport { ScrollBar } from \"./ScrollBar.razor.ts\"\r\n\r\ninterface ThumbMap {\r\n    offset: string,\r\n    scroll: string,\r\n    scrollSize: string,\r\n    size: string,\r\n    key: string,\r\n    axis: string,\r\n    client: string,\r\n    direction: string,\r\n    ratio: string\r\n}\r\nconst BAR_MAP = {\r\n    vertical: {\r\n        offset: 'offsetHeight',\r\n        scroll: 'scrollTop',\r\n        scrollSize: 'scrollHeight',\r\n        size: 'height',\r\n        key: 'vertical',\r\n        axis: 'Y',\r\n        client: 'clientY',\r\n        direction: 'top',\r\n        ratio: 'ratioY'\r\n    },\r\n    horizontal: {\r\n        offset: 'offsetWidth',\r\n        scroll: 'scrollLeft',\r\n        scrollSize: 'scrollWidth',\r\n        size: 'width',\r\n        key: 'horizontal',\r\n        axis: 'X',\r\n        client: 'clientX',\r\n        direction: 'left',\r\n        ratio: 'ratioX'\r\n    },\r\n}\r\n\r\nexport class Thumb extends BaseComponent {\r\n    root: ScrollBar\r\n    position: string\r\n    cursorDown: boolean\r\n    cursorLeave: boolean\r\n    tracker: HTMLElement\r\n    thumb: HTMLElement\r\n    map: ThumbMap\r\n    state: {\r\n        X: number,\r\n        Y: number\r\n    }\r\n    constructor(root: ScrollBar, position: string, tracker: HTMLElement, thumb: HTMLElement) {\r\n        super()\r\n        this.root = root\r\n        this.position = position\r\n        this.cursorDown = false\r\n        this.cursorLeave = false\r\n        this.tracker = tracker\r\n        this.thumb = thumb\r\n        this.map = BAR_MAP[position]\r\n        this.state = {\r\n            X: 0,\r\n            Y: 0,\r\n        }\r\n        // this.bindEvents = {}\r\n        this.setVisible(false)\r\n        this.initEvents()\r\n    }\r\n\r\n    mouseMoveDocumentHandler(e) {\r\n        if (!this.tracker || !this.thumb) return\r\n        if (this.cursorDown === false) return\r\n\r\n        const prevPage = this.state[this.map.axis]\r\n        if (!prevPage) return\r\n        const offset = (this.tracker.getBoundingClientRect()[this.map.direction] - e[this.map.client]) * -1\r\n        const thumbClickPosition = this.thumb[this.map.offset] - prevPage\r\n        const thumbPositionPercentage = ((offset - thumbClickPosition) * 100 * this.root[this.map.ratio]) / this.tracker[this.map.offset]\r\n        this.root.wrap[this.map.scroll] = (thumbPositionPercentage * this.root.wrap[this.map.scrollSize]) / 100\r\n        this.updateMove()\r\n    }\r\n\r\n    clickTrackerHandler(e) {\r\n        if (!this.thumb || !this.tracker || !this.root.wrap) return\r\n        // 点击位置在滚动条中的偏移\r\n        const offset = Math.abs(e.target.getBoundingClientRect()[this.map.direction] - e[this.map.client])\r\n        const thumbHalf = this.thumb[this.map.offset] / 2\r\n        const thumbPositionPercentage = ((offset - thumbHalf) * 100 * this.root[this.map.ratio]) / this.tracker[this.map.offset]\r\n        this.root.wrap[this.map.scroll] = (thumbPositionPercentage * this.root.wrap[this.map.scrollSize]) / 100\r\n    }\r\n    clickThumbHandler(e) {\r\n        e.stopPropagation()\r\n        if (e.ctrlKey || [1, 2].indexOf(e.button) > -1) return\r\n        if (window.getSelection()) {\r\n            window.getSelection()?.removeAllRanges()\r\n        }\r\n        this.cursorDown = true\r\n        startDrag(e, this.mouseMoveDocumentHandler.bind(this), () => {\r\n            this.cursorDown = false\r\n            this.state[this.map.axis] = 0\r\n        })\r\n        const el = e.currentTarget\r\n        if (!el) return\r\n        this.state[this.map.axis] = el[this.map.offset] - (e[this.map.client] - el.getBoundingClientRect()[this.map.direction])\r\n    }\r\n\r\n    mouseUpDocumentHandler(e) {\r\n        this.cursorDown = false\r\n        this.state[this.map.axis] = 0\r\n    }\r\n    setMove(move) {\r\n        this.thumb.style.transform = `translate${this.map.axis}(${move}%)`\r\n    }\r\n    updateMove() {\r\n        const offset = this.root.wrap[this.map.offset] - GAP\r\n        this.setMove(((this.root.wrap[this.map.scroll] * 100) / offset) * this.root[this.map.ratio])\r\n    }\r\n    setVisible(visible: boolean) {\r\n        if (this.tracker) this.tracker.style.display = visible ? 'block' : 'none'\r\n    }\r\n    initEvents() {\r\n        EventHandler.listen(this.tracker, 'mousedown', this.clickTrackerHandler.bind(this))\r\n        EventHandler.listen(this.thumb, 'mousedown', this.clickThumbHandler.bind(this))\r\n    }\r\n\r\n    dispose() {\r\n        //console.log(this.position, 'dispose thumb')\r\n        EventHandler.remove(this.tracker, 'mousedown')\r\n        EventHandler.remove(this.thumb, 'mousedown')\r\n    }\r\n}\r\n","import {BaseComponent} from \"../../JsCore/baseComponent\"\r\nimport {getComponentById} from \"../../JsCore/componentStore\"\r\nimport {EventHandler} from \"../../JsCore/eventHandler\"\r\nimport {GAP} from \"../../JsCore/utils\"\r\nimport {Bar} from \"./Bar\"\r\nimport {Thumb} from \"./Thumb\"\r\n\r\nexport class ScrollBar extends BaseComponent {\r\n    root: HTMLElement\r\n    wrap: HTMLElement\r\n    resize: HTMLElement\r\n    minSize: number\r\n    ratioX: number = 1\r\n    ratioY: number = 1\r\n    sizeHeight: string = ''\r\n    sizeWidth: string = ''\r\n    bar: Bar\r\n\r\n    constructor(options: any) {\r\n        super()\r\n        this.root = options.scrollbar\r\n        this.wrap = options.wrap\r\n        this.resize = options.resize\r\n        this.minSize = options.minSize\r\n        this.bar = new Bar(this)\r\n        for (const barOption of options.bars) {\r\n            const {position, tracker, thumb} = barOption\r\n            const o = new Thumb(this, position, tracker, thumb)\r\n            this.bar[position] = o\r\n        }\r\n        if (options.always) {\r\n            this.bar.setVisible(true)\r\n            this.bar.always = options.always\r\n        }\r\n        this.initEvents()\r\n    }\r\n\r\n    // scrollbar, wrap, resize, minSize, always\r\n    static init(id: string, options: any) {\r\n        getComponentById(id, () => {\r\n            return new ScrollBar(options)\r\n        })\r\n    }\r\n\r\n    update() {\r\n        if (!this.wrap) return\r\n        const offsetHeight = this.wrap.offsetHeight - GAP;\r\n        const offsetWidth = this.wrap.offsetWidth - GAP;\r\n        const scrollHeight = this.wrap.scrollHeight;\r\n        const scrollWidth = this.wrap.scrollWidth;\r\n        const originalHeight = offsetHeight * offsetHeight / scrollHeight;\r\n        const originalWidth = offsetWidth * offsetWidth / scrollWidth;\r\n        const height = Math.max(originalHeight, this.minSize);\r\n        const width = Math.max(originalWidth, this.minSize);\r\n\r\n        this.ratioY = originalHeight /\r\n            (offsetHeight - originalHeight) /\r\n            (height / (offsetHeight - height))\r\n        this.ratioX = originalWidth /\r\n            (offsetWidth - originalWidth) /\r\n            (width / (offsetWidth - width))\r\n\r\n        this.sizeHeight = height + GAP < offsetHeight ? height + 'px' : ''\r\n        this.sizeWidth = width + GAP < offsetWidth ? width + 'px' : ''\r\n        this.bar.update()\r\n    }\r\n\r\n    handleMouseMove(e) {\r\n        this.bar.setVisible(true)\r\n    }\r\n\r\n    handleMouseLeave(e) {\r\n        this.bar.setVisible(false)\r\n    }\r\n\r\n    handleScroll(e) {\r\n        this.bar.handleScroll(e)\r\n    }\r\n\r\n    initEvents() {\r\n        EventHandler.listen(this.root, 'mousemove', this.handleMouseMove.bind(this))\r\n        EventHandler.listen(this.root, 'mouseleave', this.handleMouseLeave.bind(this))\r\n        EventHandler.listen(this.wrap, 'scroll', this.handleScroll.bind(this))\r\n        EventHandler.listen(this.wrap, 'resize', (entries) => {\r\n            this.update()\r\n        })\r\n        EventHandler.listen(this.resize, 'resize', () => {\r\n            this.update()\r\n        })\r\n    }\r\n\r\n    dispose() {\r\n        //console.log('dispose scrollbar')\r\n        this.bar.dispose()\r\n        EventHandler.remove(this.root, 'mousemove')\r\n        EventHandler.remove(this.root, 'mouseleave')\r\n        EventHandler.remove(this.wrap, 'scroll')\r\n        EventHandler.remove(this.wrap, 'resize')\r\n        EventHandler.remove(this.resize, 'resize')\r\n    }\r\n}\r\n","import { BaseComponent } from \"../../JsCore/baseComponent\";\r\nimport { getComponentById } from \"../../JsCore/componentStore\";\r\nimport { EventHandler } from \"../../JsCore/eventHandler\";\r\nimport { GAP } from \"../../JsCore/utils\";\r\n\r\nexport class HorizontalScroll extends BaseComponent {\r\n    wrap: HTMLElement\r\n    wheel: string = ''\r\n    constructor(element: HTMLElement) {\r\n        super()\r\n        this.wrap = element\r\n        this.initEvents()\r\n    }\r\n\r\n    handleWheelEvent() {\r\n        let wheel = ''\r\n\r\n        if ('onmousewheel' in this.wrap) {\r\n            wheel = 'mousewheel'\r\n        } else if ('onwheel' in this.wrap) {\r\n            wheel = 'wheel'\r\n        } else if ('attachEvent' in window) {\r\n            wheel = 'onmousewheel'\r\n        } else {\r\n            wheel = 'DOMMouseScroll'\r\n        }\r\n        this.wheel = wheel\r\n        EventHandler.listen(this.wrap, wheel, this.scroll)\r\n    }\r\n\r\n    scroll = (event: any) => {\r\n        if (this.wrap.clientWidth >= this.wrap.scrollWidth) {\r\n            debugger\r\n            return\r\n        }\r\n        this.wrap.scrollLeft += event.deltaY ? event.deltaY : event.detail && event.detail !== 0 ? event.detail : -event.wheelDelta\r\n    }\r\n\r\n    initEvents() {\r\n        this.handleWheelEvent()\r\n    }\r\n\r\n    dispose() {\r\n        EventHandler.remove(this.wrap, this.wheel, this.scroll)\r\n    }\r\n\r\n    static init(id, element) {\r\n        getComponentById(id, () => {\r\n            return new HorizontalScroll(element)\r\n        })\r\n    }\r\n}\r\n","import { BaseComponent } from \"../../JsCore/baseComponent\";\r\nimport { getComponentById } from \"../../JsCore/componentStore\";\r\nimport { startDrag } from \"../../JsCore/dragHelper\";\r\nimport { EventHandler } from \"../../JsCore/eventHandler\";\r\n\r\nexport class SplitView extends BaseComponent {\r\n    panel1: HTMLElement\r\n    panel2: HTMLElement\r\n    separator: HTMLElement\r\n    direction: 'row' | 'column'\r\n    max: number | string\r\n    min: number | string\r\n    init: string\r\n    drag: boolean = false\r\n    constructor(doms: any, options: any) {\r\n        super()\r\n        this.panel1 = doms.panel1\r\n        this.panel2 = doms.panel2\r\n        this.separator = doms.separator\r\n        this.direction = options.direction\r\n        this.max = options.max\r\n        this.min = options.min\r\n        this.init = options.initWidth\r\n        this.setup()\r\n    }\r\n    setup() {\r\n        EventHandler.listen(this.separator, 'mousedown', this.handleMouseDown.bind(this));\r\n        if (this.panel1.parentElement)\r\n            EventHandler.listen(this.panel1.parentElement, \"resize\", this.refresh.bind(this));\r\n    }\r\n\r\n    refresh() {\r\n        if (this.drag) return;\r\n        this.panel1.style.width = this.init;\r\n    }\r\n\r\n    handleMouseDown(e) {\r\n        e.stopPropagation()\r\n        const wrapRect = this.panel1.parentElement?.getBoundingClientRect();\r\n        const separatorRect = this.separator.getBoundingClientRect();\r\n        const separatorOffset = this.direction === 'row' ? e.pageX - separatorRect.left : e.pageY - separatorRect.top;\r\n        const handler = this.direction === 'row' ? this.modeRow : this.modeColumn;\r\n        this.drag = true;\r\n        startDrag(e, event => {\r\n            handler.call(this, event, wrapRect, separatorRect, separatorOffset)\r\n        }, () => {\r\n            this.drag = false\r\n        })\r\n    }\r\n\r\n    modeRow(e, wrapRect, spRect, spOffset) {\r\n        const clientRect = this.panel1.getBoundingClientRect()\r\n        const offset = e.pageX - clientRect.left - spOffset + spRect.width / 2;\r\n        const offsetPercent = getFinalPercent(offset, wrapRect.width, this.max, this.min); //(offset / wrapRect.width) * 100;\r\n        const paneLengthPercent = (offsetPercent).toFixed(2);\r\n        this.panel1.style.width = `calc(${paneLengthPercent}% - ${spRect.width / 2}px)`;\r\n    }\r\n\r\n    modeColumn(e, wrapRect, spRect, spOffset) {\r\n        const clientRect = this.panel1.getBoundingClientRect()\r\n        const offset = e.pageY - clientRect.top - spOffset + spRect.height / 2;\r\n        const offsetPercent = getFinalPercent(offset, wrapRect.height, this.max, this.min);\r\n        const paneLengthPercent = (offsetPercent).toFixed(2);\r\n        this.panel1.style.height = `calc(${paneLengthPercent}% - ${spRect.height / 2}px)`;\r\n    }\r\n\r\n    dispose() {\r\n        EventHandler.remove(this.separator, 'mousedown');\r\n        if (this.panel1.parentElement)\r\n            EventHandler.remove(this.panel1.parentElement, 'resize');\r\n    }\r\n\r\n    static init(id, doms, options) {\r\n        getComponentById(id, () => {\r\n            return new SplitView(doms, options);\r\n        });\r\n    }\r\n}\r\n\r\nfunction getFinalPercent(offset: number, total: number, max: any, min: any) {\r\n    let p = offset / total * 100;\r\n    if (max.endsWith(\"%\")) {\r\n        const l = Number(max.replace(\"%\", \"\"));\r\n        if (p > l) p = l;\r\n    } else if (max.endsWith(\"px\")) {\r\n        const l = Number(max.replace(\"px\", \"\"));\r\n        if (offset > l) {\r\n            p = l / total * 100;\r\n        }\r\n    }\r\n\r\n    if (min.endsWith(\"%\")) {\r\n        const l = Number(min.replace(\"%\", \"\"));\r\n        if (p < l) p = l;\r\n    } else if (min.endsWith(\"px\")) {\r\n        const l = Number(min.replace(\"px\", \"\"));\r\n        if (offset < l) {\r\n            p = l / total * 100;\r\n        }\r\n    }\r\n\r\n    return p;\r\n}\r\n","import { BaseComponent } from \"../../JsCore/baseComponent\";\r\nimport { getComponentById } from \"../../JsCore/componentStore\";\r\n\r\nexport class WaterMark extends BaseComponent {\r\n    wrapper: HTMLElement\r\n    options?: any\r\n    ob: MutationObserver\r\n    mask?: HTMLElement\r\n    constructor(wrapper: HTMLElement) {\r\n        super()\r\n        this.wrapper = wrapper || window.document.documentElement\r\n\r\n        this.ob = new MutationObserver((entries) => {\r\n            for (const entry of entries) {\r\n                if (entry.type === 'childList') {\r\n                    const removeNodes = entry.removedNodes;\r\n                    removeNodes.forEach((node) => {\r\n                        if (node === this.mask) {\r\n                            this.setWatermark(this.options);\r\n                        }\r\n\r\n                        if (entry.target === this.mask) {\r\n                            this.setWatermark(this.options);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        });\r\n\r\n        this.ob.observe(this.wrapper, {\r\n            attributes: true,\r\n            childList: true,\r\n            characterData: true,\r\n            subtree: true,\r\n        });\r\n    }\r\n\r\n    setWatermark(options) {\r\n        if (this.mask) {\r\n            this.mask.remove();\r\n        }\r\n        this.options = options;\r\n        this.mask = createDiv();\r\n        let url = drawMask(options)\r\n        this.mask.style.backgroundSize = `${options.gapX + options.width}px`;\r\n        this.mask.style.backgroundImage = `url(${url})`;\r\n        this.wrapper.appendChild(this.mask);\r\n    }\r\n    dispose() {\r\n        this.ob.disconnect();\r\n    }\r\n\r\n    static setWatermark(id, wrapper, options) {\r\n        let com = getComponentById(id, () => {\r\n            return new WaterMark(wrapper)\r\n        })\r\n        com.setWatermark(options);\r\n    }\r\n\r\n}\r\n\r\nfunction createDiv(): HTMLElement {\r\n    var d = document.createElement(\"div\");\r\n    d.style.position = \"absolute\";\r\n    d.style.left = '0';\r\n    d.style.top = '0';\r\n    d.style.width = \"100%\";\r\n    d.style.height = \"100%\";\r\n    d.style.pointerEvents = \"none\";\r\n    d.style.backgroundRepeat = \"repeat\";\r\n    return d;\r\n}\r\n\r\nfunction drawMask({\r\n    top,\r\n    width,\r\n    height,\r\n    gapX,\r\n    gapY,\r\n    rotate,\r\n    alpha,\r\n    lineSpace,\r\n    fontSize,\r\n    fontColor,\r\n    contents\r\n}) {\r\n    const canvas = document.createElement('canvas');\r\n    const ctx = canvas.getContext('2d');\r\n    if (!ctx) {\r\n        console.warn('Current environment does not support Canvas, cannot draw watermarks.');\r\n        return;\r\n    }\r\n    const ratio = window.devicePixelRatio || 1;\r\n    const canvasWidth = (gapX + width) * ratio;\r\n    const canvasHeight = (gapY + height) * ratio;\r\n    canvas.width = canvasWidth;\r\n    canvas.height = canvasHeight;\r\n    canvas.style.width = `${gapX + width}px`;\r\n    canvas.style.height = `${gapY + height}px`;\r\n\r\n    ctx.rotate((Math.PI / 180) * Number(rotate));\r\n    ctx.globalAlpha = alpha;\r\n\r\n    const markWidth = width * ratio;\r\n    const markHeight = height * ratio;\r\n\r\n    ctx.fillStyle = 'transparent';\r\n    ctx.fillRect(0, 0, markWidth, markHeight);\r\n\r\n    let fontFamily = 'sans-serif';\r\n    let fontWeight = 'normal';\r\n    let textAlign: CanvasTextAlign = 'start';\r\n    let fontStyle = 'normal';\r\n    const markSize = Number(fontSize) * ratio;\r\n    for (var i = 0; i < contents.length; i++) {\r\n        let text = contents[i];\r\n        top += lineSpace;\r\n        ctx.font = `${fontStyle} normal ${fontWeight} ${markSize}px/${markHeight}px ${fontFamily}`;\r\n        ctx.textAlign = textAlign;\r\n        ctx.textBaseline = 'top';\r\n        ctx.fillStyle = fontColor;\r\n        ctx.fillText(text, 0, top * ratio);\r\n    }\r\n    return canvas.toDataURL();\r\n}\r\n","export class NavTabs {\r\n    static getMenuWidth() {\r\n        var menu = window.document.querySelector(\".nav-menu\") as HTMLElement;\r\n        return menu?.offsetWidth;\r\n    }\r\n}","export class Downloader {\r\n    static download(_, payload: any) {\r\n        const tempform = document.createElement(\"form\")\r\n        tempform.action = \"/api/download\"\r\n        tempform.method = \"post\"\r\n        tempform.style.display = \"none\"\r\n\r\n        const keys = Object.keys(payload)\r\n        for (let i = 0; i < keys.length; i++) {\r\n            const input = document.createElement(\"input\")\r\n            const key = keys[i]\r\n            input.hidden = true\r\n            input.name = key\r\n            input.value = payload[key]\r\n            tempform.appendChild(input)\r\n        }\r\n\r\n        const submit = document.createElement(\"input\")\r\n        submit.type = \"submit\"\r\n        tempform.appendChild(submit)\r\n        document.body.appendChild(tempform)\r\n        tempform.submit()\r\n        document.body.removeChild(tempform)\r\n    }\r\n\r\n    static downloadStream = async (_, payload: any) => {\r\n        try {\r\n            const {filename, streamRef} = payload;\r\n            // window['Stream'] = streamRef\r\n            // const arrayBuffer = new Uint8Array(buffer)\r\n            const arrayBuffer = await streamRef.arrayBuffer();\r\n            const blob = new Blob([arrayBuffer]);\r\n            const url = URL.createObjectURL(blob);\r\n            const anchorElement = document.createElement('a');\r\n            // window.document.body.append(anchorElement);\r\n            anchorElement.href = url;\r\n            anchorElement.download = filename ?? '';\r\n            anchorElement.click();\r\n            anchorElement.remove();\r\n            URL.revokeObjectURL(url);\r\n        } catch (e) {\r\n            console.error(e);\r\n        }\r\n    }\r\n}\r\n","﻿import { BaseComponent } from \"../../JsCore/baseComponent\";\r\n\r\nexport class SvgIcon extends BaseComponent {\r\n    static caches: Map<string, string> = new Map<string, string>()\r\n    iconName: string\r\n    className: string\r\n    style: string\r\n    fontSize: string\r\n    el: HTMLElement\r\n    constructor(options: any) {\r\n        super()\r\n        this.el = options.container\r\n        this.iconName = options.iconName\r\n        this.className = options.className\r\n        this.style = options.style\r\n        this.fontSize = options.fontSize\r\n\r\n        this.load()\r\n    }\r\n\r\n    static async getIcon(name: string) {\r\n        if (!name) return \"\"\r\n        let icon = SvgIcon.caches.get(name)\r\n        if (icon) {\r\n            return icon\r\n        }\r\n        const response = await fetch(`/icons/${name}.svg`)\r\n        icon = await response.text()\r\n        if (!SvgIcon.caches.has(name)) {\r\n            SvgIcon.caches.set(name, icon)\r\n        }\r\n        return icon\r\n    }\r\n\r\n    static async getIconPath(name: string) {\r\n        const icon = await SvgIcon.getIcon(name)\r\n        const div = document.createElement('div')\r\n        div.innerHTML = icon\r\n        const svgEl = div.querySelector('svg')\r\n        return svgEl?.innerHTML\r\n    }\r\n\r\n    async load() {\r\n        const icon = await SvgIcon.getIcon(this.iconName)\r\n        this.el.innerHTML = icon\r\n        const svgEl = this.el.getElementsByTagName('svg').item(0)\r\n        if (svgEl) {\r\n            if (this.className) {\r\n                var all = this.className.split(' ')\r\n                for (const c of all) {\r\n                    if (c?.trim()) svgEl.classList.add(c.trim())\r\n                }\r\n            }\r\n            if (this.style) {\r\n                svgEl.setAttribute('style', this.style)\r\n            }\r\n            \r\n        }\r\n\r\n    }\r\n\r\n    static init(id, options) {\r\n        new SvgIcon(options)\r\n    }\r\n}\r\n\r\n\r\n//interface SvgInfo {\r\n//    content: string | undefined\r\n//    width: number | undefined\r\n//    height: number | undefined\r\n//}\r\n//export class SvgIcon extends BaseComponent {\r\n//    static caches: Map<string, SvgInfo> = new Map<string, SvgInfo>()\r\n\r\n//    static async getIcon(_: string, name: string) {\r\n//        let info = SvgIcon.caches.get(name)\r\n//        if (info) {\r\n//            return info\r\n//        }\r\n//        const response = await fetch(`/icons/${name}.svg`)\r\n//        const content = await response.text()\r\n//        const div = document.createElement('div')\r\n//        div.innerHTML = content\r\n//        const svgEl = div.getElementsByTagName('svg').item(0)\r\n//        const svgPath = div.getElementsByTagName('path').item(0)\r\n//        if (svgPath) {\r\n//            const content = svgPath.outerHTML\r\n//            const viewBox = svgEl?.viewBox\r\n//            info = {\r\n//                content,\r\n//                width: viewBox?.baseVal.width,\r\n//                height: viewBox?.baseVal.height\r\n//            }\r\n//            if (!SvgIcon.caches.has(name)) {\r\n//                SvgIcon.caches.set(name, info)\r\n//            }\r\n//            return success('', info)\r\n//        }\r\n//        return failed('')\r\n//    }\r\n//}","import {BaseComponent} from \"../../JsCore/baseComponent.ts\";\r\nimport {EventHandler} from \"../../JsCore/eventHandler.ts\";\r\nimport {getComponentById} from \"../../JsCore/componentStore.ts\";\r\n\r\nexport class ClientHub extends BaseComponent {\r\n    channel: BroadcastChannel\r\n    mainKey: string = 'admin_project_ClientHub_main'\r\n    id: string\r\n    timer: number | undefined\r\n    interval: number\r\n    dotnetRef: any\r\n    otherClients: string[] = []\r\n    ip: string | undefined\r\n    uuid:string\r\n\r\n    constructor(id: string, options: any) {\r\n        super();\r\n        this.channel = new BroadcastChannel(\"admin_project_ClientHub\")\r\n        this.id = id\r\n        this.uuid = getUUID()\r\n        const {interval, dotnetRef} = options\r\n        this.interval = interval\r\n        this.dotnetRef = dotnetRef\r\n    }\r\n\r\n    static async init(id: string, options: any) {\r\n        var hub: ClientHub = getComponentById(id, () => new ClientHub(id, options))\r\n        const response = await fetch('/ip.client')\r\n        const ip = await response.text()\r\n        hub.ip = ip\r\n        await hub.init()\r\n    }\r\n\r\n    async init() {\r\n         //当前是否有正在发送心跳的ClientHub，如果没有，将当前实例设置为发送心跳的ClientHub\r\n        const main = localStorage.getItem(this.mainKey)\r\n        if (!main) {\r\n            localStorage.setItem(this.mainKey, this.id)\r\n        }\r\n        EventHandler.listen(this.channel, 'message', e => this.receive(e))\r\n        window.onunload = e => this.dispose()\r\n        await this.send()\r\n        this.timer = window.setInterval(async () => {\r\n            await this.send()\r\n        }, this.interval)\r\n    }\r\n\r\n    async send() {\r\n        // 广播通知其他ClientHub\r\n        this.channel.postMessage({ id: this.id, action: 'ping' })\r\n        // 检查当前是否有正在发送心跳的ClientHub\r\n        let mainId = localStorage.getItem(this.mainKey)\r\n        if (!mainId || this.otherClients.length === 0) {\r\n            localStorage.setItem(this.mainKey, this.id)\r\n            mainId = this.id\r\n        }\r\n        if (mainId == this.id) {\r\n            // 只有保存在localStorage中的组件id才能发送心跳\r\n            await this.dotnetRef.invokeMethodAsync(\"Tick\", [this.uuid, this.ip, navigator.userAgent])\r\n        }\r\n    }\r\n\r\n    receive(e: any) {\r\n        const {id, action} = e.data;\r\n        if (action === 'ping' && this.otherClients.find(v => v === id) === void 0) {\r\n            this.otherClients.push(id);\r\n        } else if (action === 'dispose') {\r\n            const index = this.otherClients.indexOf(id);\r\n            if (index > -1) {\r\n                this.otherClients = this.otherClients.splice(index, 1);\r\n            }\r\n            if (localStorage.getItem(this.mainKey) === id) {\r\n                localStorage.removeItem(this.mainKey);\r\n            }\r\n        }\r\n    }\r\n\r\n    dispose() {\r\n        window.clearInterval(this.timer)\r\n        EventHandler.remove(this.channel, 'message')\r\n        this.channel.postMessage({id: this.id, action: 'dispose'})\r\n        this.channel.close();\r\n    }\r\n}\r\n\r\n\r\n\r\nfunction getUUID() {\r\n\r\n    let uuid = localStorage.getItem('admin_project_Client_uuid')\r\n    if (uuid) {\r\n        return uuid\r\n    }\r\n    let d = new Date().getTime()\r\n    uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n        const r = (d + Math.random() * 16) % 16 | 0\r\n        d = Math.floor(d / 16)\r\n        return (c == 'x' ? r : (r & 0x3 | 0x8)).toString(16)\r\n    });\r\n    localStorage.setItem('admin_project_Client_uuid', uuid)\r\n    return uuid\r\n};","import * as u from './utilsAggregation.ts'\r\nimport {ActionWatcher} from './Shared/Project.Web.Shared/Components/ActionWatcher/ActionWatcher.razor.ts'\r\nimport {Camera} from './Shared/Project.Web.Shared/Components/Camera/Camera.razor.ts'\r\nimport {EdgeWidget} from './Shared/Project.Web.Shared/Components/EdgeWidget/EdgeWidget.razor.ts'\r\nimport {Fetch} from './Shared/Project.Web.Shared/Components/Fetch/Fetch.razor.ts'\r\nimport {FullScreen} from './Shared/Project.Web.Shared/Components/FullScreen/FullScreen.razor.ts'\r\nimport {JsTimer} from './Shared/Project.Web.Shared/Components/JsTimer/JsTimer.razor.ts'\r\nimport {ScrollBar} from './Shared/Project.Web.Shared/Components/ScrollBar/ScrollBar.razor.ts'\r\nimport {HorizontalScroll} from './Shared/Project.Web.Shared/Components/ScrollBar/HorizontalScroll.razor.ts'\r\nimport {SplitView} from './Shared/Project.Web.Shared/Components/SplitView/SplitView.razor.ts'\r\nimport {WaterMark} from './Shared/Project.Web.Shared/Components/WaterMark/WaterMark.razor.ts'\r\nimport {NavTabs} from './Shared/Project.Web.Shared/Layouts/LayoutComponents/NavTabs.razor.ts'\r\nimport {Downloader} from './Shared/Project.Web.Shared/Components/Downloader/Downloader.razor.ts'\r\nimport {SvgIcon} from './Shared/Project.Web.Shared/Components/SvgIcon/SvgIcon.razor.ts'\r\nimport {ClientHub} from './Shared/Project.Web.Shared/Components/ClientHub/ClientHub.ts'\r\n\r\ndeclare global {\r\n    interface Window {\r\n        BlazorProject: any\r\n        Utils: any\r\n    }\r\n}\r\n\r\nwindow.Utils = u.default\r\n\r\nwindow.BlazorProject = {\r\n    ActionWatcher,\r\n    Camera,\r\n    EdgeWidget,\r\n    Fetch,\r\n    FullScreen,\r\n    JsTimer,\r\n    ScrollBar,\r\n    HorizontalScroll,\r\n    SplitView,\r\n    WaterMark,\r\n    NavTabs,\r\n    Downloader,\r\n    SvgIcon,\r\n    ClientHub\r\n}\r\n"],"mappings":"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","names":["e"]}